<section class="product-list" (click)="showMenu = false">
  <div class="product-list__search-container">
    <input
      class="product-list__search-input product-list__search-input--rounded"
      type="search"
      name="search"
      placeholder="Buscar..."
      [formControl]="search"
    />
    <button
      class="button-primary"
      type="button"
      title="Agregar"
      routerLink="/add"
    >
      Agregar
    </button>
  </div>
  <div class="product-list__table-wrapper">
    <table class="product-list__table">
      <thead class="product-list__table-head">
        <tr class="product-list__table-row">
          <th class="product-list__table-header">Logo</th>
          <th class="product-list__table-header">Nombre del producto</th>
          <th class="product-list__table-header">Descripción</th>
          <th class="product-list__table-header">Fecha de liberación</th>
          <th class="product-list__table-header">Fecha de reestructuración</th>
          <th class="product-list__table-header">Acciones</th>
        </tr>
      </thead>
      <tbody class="product-list__table-body">
        <tr
          class="product-list__table-row"
          *ngFor="let product of paginatedProducts"
        >
          <td class="product-list__table-data">
            <img
              class="product-list__product-logo"
              [src]="product.logo"
              alt="Logo"
            />
          </td>
          <td class="product-list__table-data">{{ product.name }}</td>
          <td class="product-list__table-data">{{ product.description }}</td>
          <td class="product-list__table-data">
            {{ product.date_release | date : "dd/MM/yyyy" }}
          </td>
          <td class="product-list__table-data">
            {{ product.date_revision | date : "dd/MM/yyyy" }}
          </td>
          <td class="product-list__table-data">
            <div class="product-list__actions">
              <div class="menu-container">
                <button
                  class="menu-button"
                  aria-label="Menu"
                  (click)="toggleMenu(product, $event)"
                >
                  <span class="menu-button__dot"></span>
                  <span class="menu-button__dot"></span>
                  <span class="menu-button__dot"></span>
                </button>
                <div
                  class="menu-options"
                  *ngIf="selectedProduct === product && showMenu"
                >
                  <button
                    class="menu-option menu-option--edit"
                    (click)="editProduct(product)"
                  >
                    Editar
                  </button>
                  <button
                    class="menu-option menu-option--delete"
                    (click)="removeProduct(product)"
                  >
                    Eliminar
                  </button>
                </div>
              </div>
            </div>
          </td>
        </tr>
        @if (products.length <= 0) {
        <tr class="product-list__table-row">
          <td class="product-list__no-products" colspan="5">
            No hay productos disponibles.
          </td>
        </tr>
        }
      </tbody>
    </table>
    <app-paginator
      [totalItems]="productsFiltered.length"
      [itemsPerPage]="itemsPerPage"
      (pageChange)="onPageChange($event)"
      (itemsPerPageChange)="onItemsPerPageChange($event)"
    >
    </app-paginator>
  </div>
</section>
